<div class="change-password-dialog">
  <h2 mat-dialog-title>Change Password</h2>
  <mat-dialog-content>
    <form [formGroup]="form" class="change-password-form">
      <mat-form-field appearance="fill" class="w-full mb-4">
        <mat-label>Current Password</mat-label>
        <input matInput [type]="hideCurrentPassword ? 'password' : 'text'" formControlName="currentPassword"
          placeholder="Current Password" required />
        <mat-icon matPrefix>lock</mat-icon>
        <mat-icon matSuffix (click)="hideCurrentPassword = !hideCurrentPassword" class="cursor-pointer">
          {{ hideCurrentPassword ? 'visibility_off' : 'visibility' }}
        </mat-icon>
        <mat-error *ngIf="form.get('currentPassword')?.hasError('required') && form.get('currentPassword')?.touched">
          Current password is required.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full mb-4">
        <mat-label>New Password</mat-label>
        <input matInput [type]="hideNewPassword ? 'password' : 'text'" formControlName="newPassword"
          placeholder="New Password" required />
        <mat-icon matPrefix>lock</mat-icon>
        <mat-icon matSuffix (click)="hideNewPassword = !hideNewPassword" class="cursor-pointer">
          {{ hideNewPassword ? 'visibility_off' : 'visibility' }}
        </mat-icon>
        <mat-error *ngIf="form.get('newPassword')?.hasError('required') && form.get('newPassword')?.touched">
          New password is required.
        </mat-error>
        <mat-error *ngIf="form.get('newPassword')?.hasError('minlength') && form.get('newPassword')?.touched">
          New password must be at least 6 characters long.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" class="w-full mb-4">
        <mat-label>Confirm New Password</mat-label>
        <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmNewPassword"
          placeholder="Confirm New Password" required />
        <mat-icon matPrefix>lock</mat-icon>
        <mat-icon matSuffix (click)="hideConfirmPassword = !hideConfirmPassword" class="cursor-pointer">
          {{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}
        </mat-icon>
        <mat-error *ngIf="form.get('confirmNewPassword')?.hasError('required') && form.get('confirmNewPassword')?.touched">
          Confirm password is required.
        </mat-error>
        <mat-error *ngIf="form.get('confirmNewPassword')?.hasError('passwordMismatch') && form.get('confirmNewPassword')?.touched">
          Passwords do not match.
        </mat-error>
      </mat-form-field>
    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="form.invalid">Change Password</button>
  </mat-dialog-actions>
</div>