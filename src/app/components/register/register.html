<!-- src/app/register/register.component.html -->

<div class="h-screen flex items-center justify-center bg-gray-100">
    <form class="shadow-lg rounded-xl p-8 bg-white w-full max-w-md" [formGroup]="form" (ngSubmit)="register()">
        <div class="py-4 text-center">
            <h1 class="text-3xl font-extrabold text-gray-800 mb-2">Register</h1>
            <h6 class="text-lg text-gray-600">Create your account</h6>
        </div>

        <mat-form-field appearance="fill" class="w-full mb-4">
            <mat-label>Email</mat-label>
            <input matInput placeholder="Email" formControlName="email" required />
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="form.get('email')?.hasError('required') && form.get('email')?.touched">
                Email is required.
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('email') && form.get('email')?.touched">
                Please enter a valid email address.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full mb-4">
            <mat-label>Full Name</mat-label>
            <input matInput placeholder="Full Name" formControlName="fullName" required />
            <mat-icon matPrefix>person</mat-icon>
            <mat-error *ngIf="form.get('fullName')?.hasError('required') && form.get('fullName')?.touched">
                Full Name is required.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full mb-4">
            <mat-label>Roles</mat-label>
            <mat-select formControlName="roles" multiple>
                <mat-option *ngFor="let role of availableRoles" [value]="role">{{ role }}</mat-option>
            </mat-select>
            <mat-icon matPrefix>group</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full mb-4">
            <mat-label>Password</mat-label>
            <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
                placeholder="Password" required />
            <mat-icon matPrefix>lock</mat-icon>
            <mat-icon matSuffix (click)="hidePassword = !hidePassword" class="cursor-pointer">
                {{ hidePassword ? 'visibility_off' : 'visibility' }}
            </mat-icon>
            <mat-error *ngIf="form.get('password')?.hasError('required') && form.get('password')?.touched">
                Password is required.
            </mat-error>
            <mat-error *ngIf="form.get('password')?.hasError('minlength') && form.get('password')?.touched">
                Password must be at least 6 characters long.
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-full mb-6">
            <mat-label>Confirm Password</mat-label>
            <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword"
                placeholder="Confirm Password" required />
            <mat-icon matPrefix>lock</mat-icon>
            <mat-icon matSuffix (click)="hideConfirmPassword = !hideConfirmPassword" class="cursor-pointer">
                {{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}
            </mat-icon>
            <mat-error
                *ngIf="form.get('confirmPassword')?.hasError('required') && form.get('confirmPassword')?.touched">
                Confirm Password is required.
            </mat-error>
            <mat-error
                *ngIf="form.get('confirmPassword')?.hasError('passwordMismatch') && form.get('confirmPassword')?.touched">
                Passwords do not match.
            </mat-error>
        </mat-form-field>

        <button type="submit"
            class="w-full py-3 px-4 rounded-lg bg-purple-700 text-white font-bold text-lg hover:bg-purple-800 transition-colors duration-300 disabled:bg-purple-400 disabled:cursor-not-allowed"
            [disabled]="form.invalid">
            Register
        </button>

        <div class="my-5 text-center">
            <span class="text-gray-600">
                Already have an account?
            </span>
            <a class="text-purple-700 hover:underline font-semibold ml-1" [routerLink]="['/login']">Login</a>
        </div>
    </form>
</div>